function getWeather(options) {
	
	/*	
		dokumentace: https://openweathermap.org/current
		výstup: {"coord":{"lon":15.17,"lat":50.72},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"base":"stations","main":{"temp":19.62,"pressure":988.33,"humidity":58,"temp_min":19.62,"temp_max":19.62,"sea_level":1030.28,"grnd_level":988.33},"wind":{"speed":1.82,"deg":302.508},"clouds":{"all":0},"dt":1532411685,"sys":{"message":0.0024,"country":"CZ","sunrise":1532402093,"sunset":1532458556},"id":3074603,"name":"Jablonec nad Nisou","cod":200}
	*/
	
	$.getJSON('https://api.openweathermap.org/data/2.5/weather', {
		appid: options.apikey,
		units: options.units,
		q: options.location
	}).done(function(data) {
		$(options.nowresult).html('<img src="http://openweathermap.org/img/w/' + data.weather[0].icon + '.png" alt="" /> <strong>' + Math.round(data.main.temp) + '°C</strong>');
	});
	
	/*
		dokumentace: https://openweathermap.org/forecast5
		výstup: {"cod":"200","message":0.063,"cnt":37,"list":[{"dt":1532422800,"main":{"temp":25.15,"temp_min":25.15,"temp_max":25.15,"pressure":987.96,"sea_level":1029.68,"grnd_level":987.96,"humidity":48,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.25,"deg":356.504},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-24 09:00:00"},{"dt":1532433600,"main":{"temp":27.12,"temp_min":27.12,"temp_max":27.12,"pressure":987.31,"sea_level":1028.74,"grnd_level":987.31,"humidity":44,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.22,"deg":21.5014},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-24 12:00:00"},{"dt":1532444400,"main":{"temp":27.96,"temp_min":27.96,"temp_max":27.96,"pressure":986.33,"sea_level":1027.63,"grnd_level":986.33,"humidity":43,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":2.86,"deg":28.0037},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-24 15:00:00"},{"dt":1532455200,"main":{"temp":26.1,"temp_min":26.1,"temp_max":26.1,"pressure":985.85,"sea_level":1027.31,"grnd_level":985.85,"humidity":48,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":56},"wind":{"speed":2.5,"deg":26.0095},"rain":{"3h":0.035},"sys":{"pod":"d"},"dt_txt":"2018-07-24 18:00:00"},{"dt":1532466000,"main":{"temp":23.13,"temp_min":23.13,"temp_max":23.13,"pressure":986.22,"sea_level":1027.81,"grnd_level":986.22,"humidity":56,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":44},"wind":{"speed":1.91,"deg":17.5005},"rain":{"3h":0.015},"sys":{"pod":"n"},"dt_txt":"2018-07-24 21:00:00"},{"dt":1532476800,"main":{"temp":19.43,"temp_min":19.43,"temp_max":19.43,"pressure":986.01,"sea_level":1027.72,"grnd_level":986.01,"humidity":77,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":48},"wind":{"speed":1.21,"deg":10.0027},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-25 00:00:00"},{"dt":1532487600,"main":{"temp":19.28,"temp_min":19.28,"temp_max":19.28,"pressure":985.83,"sea_level":1027.81,"grnd_level":985.83,"humidity":77,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":56},"wind":{"speed":1.21,"deg":355.003},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-25 03:00:00"},{"dt":1532498400,"main":{"temp":23.55,"temp_min":23.55,"temp_max":23.55,"pressure":986.43,"sea_level":1028.06,"grnd_level":986.43,"humidity":59,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":1.81,"deg":12.5009},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-25 06:00:00"},{"dt":1532509200,"main":{"temp":27.07,"temp_min":27.07,"temp_max":27.07,"pressure":986.41,"sea_level":1027.9,"grnd_level":986.41,"humidity":49,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.16,"deg":6.50528},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-25 09:00:00"},{"dt":1532520000,"main":{"temp":28.45,"temp_min":28.45,"temp_max":28.45,"pressure":985.58,"sea_level":1026.94,"grnd_level":985.58,"humidity":40,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.87,"deg":15.0045},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-25 12:00:00"},{"dt":1532530800,"main":{"temp":28.63,"temp_min":28.63,"temp_max":28.63,"pressure":984.97,"sea_level":1026.25,"grnd_level":984.97,"humidity":37,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.42,"deg":29.0005},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-25 15:00:00"},{"dt":1532541600,"main":{"temp":26.38,"temp_min":26.38,"temp_max":26.38,"pressure":985.15,"sea_level":1026.45,"grnd_level":985.15,"humidity":42,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":56},"wind":{"speed":3.33,"deg":24.0051},"rain":{"3h":0.01},"sys":{"pod":"d"},"dt_txt":"2018-07-25 18:00:00"},{"dt":1532552400,"main":{"temp":22.3,"temp_min":22.3,"temp_max":22.3,"pressure":985.75,"sea_level":1027.23,"grnd_level":985.75,"humidity":57,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03n"}],"clouds":{"all":44},"wind":{"speed":1.52,"deg":2.00012},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-25 21:00:00"},{"dt":1532563200,"main":{"temp":20.75,"temp_min":20.75,"temp_max":20.75,"pressure":985.7,"sea_level":1027.56,"grnd_level":985.7,"humidity":67,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":56},"wind":{"speed":1.23,"deg":25.0013},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-26 00:00:00"},{"dt":1532574000,"main":{"temp":17.72,"temp_min":17.72,"temp_max":17.72,"pressure":985.85,"sea_level":1027.68,"grnd_level":985.85,"humidity":78,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01n"}],"clouds":{"all":0},"wind":{"speed":1.16,"deg":5.50012},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-26 03:00:00"},{"dt":1532584800,"main":{"temp":23.19,"temp_min":23.19,"temp_max":23.19,"pressure":986.5,"sea_level":1028.31,"grnd_level":986.5,"humidity":53,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":1.82,"deg":352.002},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-26 06:00:00"},{"dt":1532595600,"main":{"temp":27.01,"temp_min":27.01,"temp_max":27.01,"pressure":986.83,"sea_level":1028.49,"grnd_level":986.83,"humidity":47,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.22,"deg":34.5043},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-26 09:00:00"},{"dt":1532606400,"main":{"temp":28.42,"temp_min":28.42,"temp_max":28.42,"pressure":986.63,"sea_level":1027.97,"grnd_level":986.63,"humidity":41,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.61,"deg":34.5019},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-26 12:00:00"},{"dt":1532617200,"main":{"temp":28.75,"temp_min":28.75,"temp_max":28.75,"pressure":986.07,"sea_level":1027.41,"grnd_level":986.07,"humidity":36,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.75,"deg":27.5004},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-26 15:00:00"},{"dt":1532628000,"main":{"temp":26.74,"temp_min":26.74,"temp_max":26.74,"pressure":986.22,"sea_level":1027.62,"grnd_level":986.22,"humidity":40,"temp_kf":0},"weather":[{"id":800,"main":"Clear","description":"clear sky","icon":"01d"}],"clouds":{"all":0},"wind":{"speed":3.1,"deg":35.001},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-26 18:00:00"},{"dt":1532638800,"main":{"temp":24.01,"temp_min":24.01,"temp_max":24.01,"pressure":987.38,"sea_level":1028.98,"grnd_level":987.38,"humidity":50,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":64},"wind":{"speed":3.06,"deg":49.0087},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-26 21:00:00"},{"dt":1532649600,"main":{"temp":22.16,"temp_min":22.16,"temp_max":22.16,"pressure":987.33,"sea_level":1029.1,"grnd_level":987.33,"humidity":67,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10n"}],"clouds":{"all":68},"wind":{"speed":1.65,"deg":44.0051},"rain":{"3h":0.05},"sys":{"pod":"n"},"dt_txt":"2018-07-27 00:00:00"},{"dt":1532660400,"main":{"temp":20.8,"temp_min":20.8,"temp_max":20.8,"pressure":987.15,"sea_level":1029.12,"grnd_level":987.15,"humidity":72,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02n"}],"clouds":{"all":24},"wind":{"speed":1.72,"deg":23.0046},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-27 03:00:00"},{"dt":1532671200,"main":{"temp":23.62,"temp_min":23.62,"temp_max":23.62,"pressure":987.57,"sea_level":1029.36,"grnd_level":987.57,"humidity":63,"temp_kf":0},"weather":[{"id":801,"main":"Clouds","description":"few clouds","icon":"02d"}],"clouds":{"all":20},"wind":{"speed":2.07,"deg":49.5064},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-27 06:00:00"},{"dt":1532682000,"main":{"temp":24.95,"temp_min":24.95,"temp_max":24.95,"pressure":987.71,"sea_level":1029.32,"grnd_level":987.71,"humidity":57,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":64},"wind":{"speed":3.31,"deg":46.0051},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-27 09:00:00"},{"dt":1532692800,"main":{"temp":27.36,"temp_min":27.36,"temp_max":27.36,"pressure":986.68,"sea_level":1028.24,"grnd_level":986.68,"humidity":50,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":64},"wind":{"speed":2.97,"deg":38.0002},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-27 12:00:00"},{"dt":1532703600,"main":{"temp":27.02,"temp_min":27.02,"temp_max":27.02,"pressure":986.01,"sea_level":1027.5,"grnd_level":986.01,"humidity":50,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":76},"wind":{"speed":3.52,"deg":39.0024},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-27 15:00:00"},{"dt":1532714400,"main":{"temp":25.62,"temp_min":25.62,"temp_max":25.62,"pressure":985.9,"sea_level":1027.43,"grnd_level":985.9,"humidity":53,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":80},"wind":{"speed":3.08,"deg":42.501},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-27 18:00:00"},{"dt":1532725200,"main":{"temp":23.03,"temp_min":23.03,"temp_max":23.03,"pressure":986.38,"sea_level":1028.01,"grnd_level":986.38,"humidity":66,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":56},"wind":{"speed":2.14,"deg":39.0001},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-27 21:00:00"},{"dt":1532736000,"main":{"temp":21.38,"temp_min":21.38,"temp_max":21.38,"pressure":986.01,"sea_level":1027.78,"grnd_level":986.01,"humidity":77,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":88},"wind":{"speed":1.32,"deg":36.5024},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-28 00:00:00"},{"dt":1532746800,"main":{"temp":21.03,"temp_min":21.03,"temp_max":21.03,"pressure":985.53,"sea_level":1027.3,"grnd_level":985.53,"humidity":79,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04n"}],"clouds":{"all":88},"wind":{"speed":1.22,"deg":60.0016},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-28 03:00:00"},{"dt":1532757600,"main":{"temp":23.21,"temp_min":23.21,"temp_max":23.21,"pressure":985.52,"sea_level":1027.28,"grnd_level":985.52,"humidity":69,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04d"}],"clouds":{"all":80},"wind":{"speed":1.66,"deg":112.003},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-28 06:00:00"},{"dt":1532768400,"main":{"temp":26.23,"temp_min":26.23,"temp_max":26.23,"pressure":985.62,"sea_level":1027.11,"grnd_level":985.62,"humidity":58,"temp_kf":0},"weather":[{"id":802,"main":"Clouds","description":"scattered clouds","icon":"03d"}],"clouds":{"all":44},"wind":{"speed":1.78,"deg":127.002},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-28 09:00:00"},{"dt":1532779200,"main":{"temp":24.52,"temp_min":24.52,"temp_max":24.52,"pressure":984.77,"sea_level":1026.17,"grnd_level":984.77,"humidity":82,"temp_kf":0},"weather":[{"id":501,"main":"Rain","description":"moderate rain","icon":"10d"}],"clouds":{"all":32},"wind":{"speed":1.76,"deg":127},"rain":{"3h":3.71},"sys":{"pod":"d"},"dt_txt":"2018-07-28 12:00:00"},{"dt":1532790000,"main":{"temp":26.37,"temp_min":26.37,"temp_max":26.37,"pressure":984.43,"sea_level":1025.71,"grnd_level":984.43,"humidity":69,"temp_kf":0},"weather":[{"id":500,"main":"Rain","description":"light rain","icon":"10d"}],"clouds":{"all":56},"wind":{"speed":1.76,"deg":87.5019},"rain":{"3h":1.34},"sys":{"pod":"d"},"dt_txt":"2018-07-28 15:00:00"},{"dt":1532800800,"main":{"temp":25.73,"temp_min":25.73,"temp_max":25.73,"pressure":984.06,"sea_level":1025.57,"grnd_level":984.06,"humidity":64,"temp_kf":0},"weather":[{"id":804,"main":"Clouds","description":"overcast clouds","icon":"04d"}],"clouds":{"all":92},"wind":{"speed":1.42,"deg":73.5001},"rain":{},"sys":{"pod":"d"},"dt_txt":"2018-07-28 18:00:00"},{"dt":1532811600,"main":{"temp":23.73,"temp_min":23.73,"temp_max":23.73,"pressure":984.61,"sea_level":1026.19,"grnd_level":984.61,"humidity":69,"temp_kf":0},"weather":[{"id":803,"main":"Clouds","description":"broken clouds","icon":"04n"}],"clouds":{"all":80},"wind":{"speed":1.83,"deg":89.0029},"rain":{},"sys":{"pod":"n"},"dt_txt":"2018-07-28 21:00:00"}],"city":{"id":3074603,"name":"Jablonec nad Nisou","coord":{"lat":50.7241,"lon":15.1711},"country":"CZ","population":44878}}
	*/
	
	$.getJSON('https://api.openweathermap.org/data/2.5/forecast', {
		appid: options.apikey,
		units: options.units,
		q: options.location
	}).done(function(data) {
		$(options.longtherm).html('');
		
		for(var i = 0; i < data.list.length; i++) {
			item = data.list[i];
			
			/* Převod timestamp na lokalizovaný formát času */
			var dt = new Date();
			dt.setTime((item.dt - 7200) * 1000);
			datestring = dt.toLocaleDateString('cs-CZ') + ' ' + dt.toLocaleTimeString('cs-CZ');
			
			$(options.longtherm).append('<div><img src="http://openweathermap.org/img/w/' + item.weather[0].icon + '.png" alt="" /> ' + datestring + ' <br/> teplota ' + Math.round(item.main.temp) + '°C, vítr ' + item.wind.speed + 'm/s</div>');
		}
	});
	
}
